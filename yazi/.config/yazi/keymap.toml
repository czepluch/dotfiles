# Yazi Keybindings
# Based on vim-style navigation with some enhancements

[mgr]
prepend_keymap = [
  # Navigation
  { on = ["<Esc>"], run = "escape", desc = "Exit visual mode, clear selected, or cancel" },
  { on = ["q"], run = "quit", desc = "Exit yazi" },
  { on = ["Q"], run = "quit --no-cwd-file", desc = "Exit without changing directory" },
  
  # Movement
  { on = ["h"], run = "leave", desc = "Go back to parent directory" },
  { on = ["l"], run = "enter", desc = "Enter directory or open file" },
  { on = ["<Left>"], run = "leave", desc = "Go back" },
  { on = ["<Right>"], run = "enter", desc = "Enter" },
  
  # Quick jumps
  { on = ["g", "h"], run = "cd ~", desc = "Go to home" },
  { on = ["g", "c"], run = "cd ~/.config", desc = "Go to config" },
  { on = ["g", "d"], run = "cd ~/Downloads", desc = "Go to downloads" },
  { on = ["g", "D"], run = "cd ~/dev", desc = "Go to dev" },
  
  # Operations
  { on = ["<Enter>"], run = "open", desc = "Open file" },
  { on = ["y"], run = "yank", desc = "Yank (copy) selected files" },
  { on = ["x"], run = "yank --cut", desc = "Cut selected files" },
  { on = ["p"], run = "paste", desc = "Paste files" },
  { on = ["d"], run = "remove", desc = "Delete selected files" },
  { on = ["D"], run = "remove --permanently", desc = "Delete permanently (no trash)" },
  { on = ["r"], run = "rename", desc = "Rename file" },
  { on = [";"], run = "shell", desc = "Run shell command" },
  { on = [":"], run = "shell --block", desc = "Run shell command (blocking)" },
  
  # Visual mode
  { on = ["v"], run = "visual_mode", desc = "Enter visual mode" },
  { on = ["V"], run = "visual_mode --unset", desc = "Exit visual mode" },
  
  # Search
  { on = ["/"], run = "search fd", desc = "Search files with fd" },
  { on = ["n"], run = "search_next", desc = "Next search result" },
  { on = ["N"], run = "search_prev", desc = "Previous search result" },
  
  # View options
  { on = ["z", "h"], run = "hidden toggle", desc = "Toggle hidden files" },
  { on = ["z", "a"], run = "linemode none", desc = "No line mode" },
  { on = ["z", "s"], run = "linemode size", desc = "Show file sizes" },
  { on = ["z", "m"], run = "linemode mtime", desc = "Show modified time" },
]

[tasks]
prepend_keymap = [
  { on = ["<Esc>"], run = "close", desc = "Close task manager" },
  { on = ["q"], run = "close", desc = "Close task manager" },
]

[select]
prepend_keymap = [
  { on = ["<Esc>"], run = "close", desc = "Cancel selection" },
  { on = ["<Enter>"], run = "close --submit", desc = "Submit selection" },
]

[input]
prepend_keymap = [
  { on = ["<Esc>"], run = "close", desc = "Cancel input" },
  { on = ["<Enter>"], run = "close --submit", desc = "Submit input" },
]

[completion]
prepend_keymap = [
  { on = ["<Tab>"], run = "close --submit", desc = "Submit completion" },
]

[help]
prepend_keymap = [
  { on = ["<Esc>"], run = "escape", desc = "Close help" },
  { on = ["q"], run = "escape", desc = "Close help" },
]
